{% extends "base.html" %} {% block content %}

<div class="row">
  <form class="center" action="{{ url_for('search_jokes') }}" method="POST">
    <div class="search-bar center" style="width: 50%">
      <input
        type="text"
        name="search"
        id="search"
        minlength="3"
        class="validate"
        required
        placeholder="Search jokes"
      />
    </div>

    <div class="search-bar">
      <button
        type="submit"
        class="light-blue darken-1 search-btn btn text-shadow"
      >
        Search
      </button>
      <a
        href="{{ url_for('get_jokes') }}"
        class="red search-btn btn text-shadow"
        >Reset</a
      >
    </div>
  </form>
</div>
{% if session.user %}
<div class="row center">
<a href="{{ url_for('add_joke') }}" class="waves-effect waves-light btn"
  >Add a Joke!</a
></div>
{% endif %} {% for joke in jokes %}
<div class="row center">
  <a href=" {{ url_for('joke', joke_id=joke._id) }}">
    <div class="s12">
      <div class="card">
        <div class="card-content">
          <p class="left created-by">Created by: {{ joke.created_by }}</p>
          <h3>{{ joke.joke_title }}</h3>
          {% if joke.created_by|lower == session.user|lower %}
        </div>
        <div class="fixed-action-btn click-to-toggle right direction-left">
          <a class="btn-floating btn-large green">
            <i class="fas fa-plus"></i>
          </a>
          <ul>
            <li>
              <a
                href="{{ url_for('delete_joke', joke_id=joke._id) }}"
                class="btn-floating red"
                style="
                  opacity: 1;
                  transform: scale(1) translateY(0px) translateX(0px);
                "
                onclick="return confirm('Are you sure you want to delete this joke?');"
              >
                <i class="fas fa-times"></i>
              </a>
            </li>
            <li>
              <a
                href="{{ url_for('edit_joke', joke_id=joke._id) }}"
                class="btn-floating orange"
                style="
                  opacity: 1;
                  transform: scale(1) translateY(0px) translateX(0px);
                "
              >
                <i class="far fa-edit"></i>
              </a>
            </li>
          </ul>
        </div>
        {% endif %}
      </div>
    </div>

    {% endfor %}
  </a>
</div>

{% endblock %}
